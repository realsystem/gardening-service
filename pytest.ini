[pytest]
# Pytest configuration for Gardening Helper Service
# Tests run locally using in-memory SQLite (no Docker required)

# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Minimum Python version
minversion = 6.0

# Test paths
testpaths = tests

# Environment for tests
env =
    APP_ENV=test

# Console output and coverage
addopts =
    -v
    --strict-markers
    --tb=short
    --disable-warnings
    --cov=app
    --cov-report=term-missing
    --cov-report=html:htmlcov
    --cov-fail-under=80

# Markers for categorizing tests
markers =
    unit: Unit tests for individual components
    integration: Integration tests requiring database
    slow: Tests that take significant time to run
    tree_shading: Tree shading feature tests (new feature)
    tree_shading_integration: Tree shading integration tests
    tree_shading_isolation: Tree shading multi-user isolation tests
    tree_shading_scale: Tree shading scale tests
    sun_path: Sun path and seasonal shading feature tests
    layout_grid: Layout grid snap-to-grid feature tests
    admin_access: Admin access control feature tests
    export_import: Data export/import feature tests
    companion_planting: Companion planting feature tests
    nutrient_optimization: Nutrient solution optimization feature tests
    compliance: Compliance and restricted plant detection tests
