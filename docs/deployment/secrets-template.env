# Secrets Configuration Template for Fly.io
# DO NOT COMMIT THIS FILE WITH REAL VALUES
# 
# Usage:
# 1. Copy this file: cp secrets-template.env .secrets.env
# 2. Fill in real values in .secrets.env
# 3. Add .secrets.env to .gitignore
# 4. Deploy secrets: ./scripts/deploy-secrets.sh

# =============================================================================
# REQUIRED SECRETS
# =============================================================================

# Database Connection (auto-set by `fly postgres attach`)
# Format: postgresql://user:password@host:port/database?sslmode=require
# Note: This is automatically set when you run `fly postgres attach`
# DATABASE_URL=postgresql://user:password@host.internal:5432/dbname?sslmode=require

# JWT Secret Key (generate with: openssl rand -hex 32)
# CRITICAL: Must be kept secret and unique per environment
SECRET_KEY=REPLACE_WITH_RANDOM_HEX_STRING

# =============================================================================
# OPTIONAL SECRETS
# =============================================================================

# Admin Bootstrap Email
# Used to create the initial admin user on first deployment
# ADMIN_BOOTSTRAP_EMAIL=admin@yourdomain.com

# Email Service Credentials (if using email features)
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_USERNAME=apikey
# SMTP_PASSWORD=your_sendgrid_api_key
# SMTP_FROM_EMAIL=noreply@yourdomain.com

# =============================================================================
# DEPLOYMENT INSTRUCTIONS
# =============================================================================

# Step 1: Generate SECRET_KEY
# Run: openssl rand -hex 32
# Copy output and replace REPLACE_WITH_RANDOM_HEX_STRING above

# Step 2: Set secrets in Fly.io (one-time setup)
# fly secrets set SECRET_KEY="$(openssl rand -hex 32)" --app gardening-service-api

# Step 3: Optional - Set admin bootstrap email
# fly secrets set ADMIN_BOOTSTRAP_EMAIL="admin@yourdomain.com" --app gardening-service-api

# Step 4: Verify secrets are set
# fly secrets list --app gardening-service-api

# Step 5: Deploy application
# fly deploy

# =============================================================================
# SECURITY REMINDERS
# =============================================================================

# ✅ DO:
# - Generate unique secrets for each environment (dev, staging, prod)
# - Use strong, random values (min 32 characters for SECRET_KEY)
# - Rotate secrets periodically (every 90 days recommended)
# - Store secrets in password manager or encrypted vault
# - Use `fly secrets set` to deploy secrets

# ❌ DON'T:
# - Commit secrets to git
# - Share secrets via email/chat
# - Use the same secrets across environments
# - Log secrets in application code
# - Store secrets in plain text files

# =============================================================================
# ROTATING SECRETS
# =============================================================================

# To rotate SECRET_KEY:
# 1. Generate new key: openssl rand -hex 32
# 2. Update in Fly.io: fly secrets set SECRET_KEY="new_key" --app gardening-service-api
# 3. App will automatically restart with new secret
# 4. All existing JWT tokens will be invalidated (users must re-login)

# =============================================================================
# EMERGENCY SECRET REVOCATION
# =============================================================================

# If a secret is compromised:
# 1. Immediately rotate the secret
# 2. Review logs for unauthorized access
# 3. Notify affected users if necessary
# 4. Update incident response documentation
